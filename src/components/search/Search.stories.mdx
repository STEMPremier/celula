import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from '@storybook/addon-docs/blocks';
import { action } from '@storybook/addon-actions';

import Search from '.';

<Meta
  args={{
    handleSearch: action('You did a search!'),
    label: 'Do a search:',
    name: 'searcher',
  }}
  component={Search}
  title="Components/Atoms/Search"
/>

# Search
<Description of={Search} />

<Canvas>
  <Story name="Search with Controls">
    {args => <Search {...args} />}
  </Story>
</Canvas>

<ArgsTable story="Search with Controls" />

## Types
By default `Search` searches on click or press of the included button:

<Canvas>
  <Story name="Search on Click">
    <Search
      handleSearch={action('You searched on click.')}
      helpText="Look in the 'Actions' tab of the Canvas, and click the button."
      label="Search on Click:"
      name="searchTypesOnClick"
      placeholder="Enter search terms here"
    />
  </Story>
</Canvas>

It has the option of searcing as you type as well:

<Canvas>
  <Story name="Search as you Type">
    <Search
      handleSearch={action('You are searching as you type!')}
      helpText="Clearing the search doesn't trigger the handleSearch function."
      instantSearch={true}
      label="Search as You Type:"
      name="searchTypesOnType"
      placeholder="Enter search terms here"
    />
  </Story>
</Canvas>

In either case, you can also search by pressing the Enter key.

## States
A `Search` can be disabled:

<Canvas>
  <Story name="Search Disabled">
    <Search
      disabled={true}
      handleSearch={value => console.log(value)}
      label="Disabled Search:"
      name="searchStatesDisabled"
      placeholder="Enter search terms here"
    />
  </Story>
</Canvas>

Or have an error:
<Canvas>
  <Story name="Search but Error">
    <Search
      errorMsg="Whoops! Somthing is not okay."
      handleSearch={action('Your search caused an error, oh no!')}
      label="Search with Error:"
      name="searchStatesWithError"
      placeholder="Enter search terms here"
    />
  </Story>
</Canvas>

## Events
`Search` provides hooks to trigger actions at specific moments across its operation.

A `Search` can trigger an action onClear:
<Canvas>
  <Story name="Search with onClear">
    <Search
      handleSearch={action('Search!')}
      helpText="Clearing the search doesn't trigger the handleSearch function, but it does trigger the onClear function."
      label="Search with onClear"
      name="searchStatesWithOnClear"
      onClear={action('You cleared the Search!')}
      placeholder="Enter search terms here"
    />
  </Story>
</Canvas>
